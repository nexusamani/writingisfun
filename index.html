<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writing is Fun with Dr Saufi</title>
    <style>
        /* CSS: Kid-Friendly Styling */
        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            background-color: #e0f7fa;
            text-align: center;
            padding: 20px;
            margin: 0;
        }

        /* DR SAUFI BRANDING */
        .main-title {
            color: #d84315; /* Deep Orange */
            font-size: 2.5rem;
            margin-bottom: 5px;
            text-shadow: 2px 2px 0px #ffccbc;
        }
        
        .sub-header {
            color: #006064;
            font-size: 1.2rem;
            margin-bottom: 25px;
            font-weight: bold;
        }

        /* TABS NAVIGATION */
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 0;
        }

        .tab-btn {
            padding: 15px 30px;
            font-size: 18px;
            border: none;
            border-radius: 15px 15px 0 0;
            cursor: pointer;
            background-color: #b0bec5;
            color: #37474f;
            font-weight: bold;
            width: 220px;
            transition: background 0.3s;
        }

        .tab-btn:hover { background-color: #cfd8dc; }

        .tab-btn.active {
            background-color: white;
            color: #006064;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.1);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            min-height: 450px;
        }

        /* MENU GRID */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .level-btn {
            padding: 25px;
            font-size: 18px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.2s;
            color: white;
            font-weight: bold;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2);
        }
        .level-btn:hover { transform: scale(1.05); }
        .level-btn:active { transform: scale(0.95); box-shadow: none; translateY(5px); }

        /* Level Colors */
        .y1 { background-color: #FF6B6B; }
        .y2 { background-color: #FF8E53; }
        .y3 { background-color: #FFD93D; color: #444; }
        .y4 { background-color: #6BCB77; }
        .y5 { background-color: #4D96FF; }
        .y6 { background-color: #6C5CE7; }

        /* GAME AREA */
        .game-area { display: none; }

        .sentence-row {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .slot {
            min-width: 110px;
            height: 65px;
            border: 3px dashed #b0bec5;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f5f5f5;
            font-size: 18px;
            font-weight: bold;
            color: #555;
            position: relative;
            padding: 0 10px;
        }

        .slot::before {
            content: attr(data-type);
            position: absolute;
            top: -25px;
            font-size: 12px;
            color: #78909c;
            text-transform: uppercase;
            font-weight: bold;
        }

        .slot.filled {
            border-style: solid;
            background-color: #e8f5e9;
            color: #2e7d32;
            border-color: #4caf50;
        }

        .slot[data-type="Verb-to-be"] { border-color: #ffcc80; background-color: #fff3e0; }
        .slot[data-type="Verb-ing"] { border-color: #80cbc4; background-color: #e0f2f1; }

        .word-bank {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .word-chip {
            background-color: #0288d1;
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 4px 0 #01579b;
            transition: transform 0.1s;
        }
        
        .word-chip:hover { background-color: #039be5; transform: translateY(-2px); }
        .word-chip:active { transform: translateY(2px); box-shadow: none; }

        .feedback {
            font-size: 24px;
            font-weight: bold;
            height: 40px;
            margin: 20px 0;
        }
        .correct { color: #2e7d32; }
        .wrong { color: #c62828; }

        .nav-btn {
            margin-top: 20px;
            padding: 12px 24px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            color: white;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
        }
        #checkBtn { background-color: #fb8c00; }
        #nextBtn { background-color: #43a047; display: none; }
        #homeBtn { background-color: #78909c; margin-right: 15px;}

    </style>
</head>
<body>

    <h1 class="main-title">Writing is Fun with Dr Saufi</h1>
    <div class="sub-header" id="modeSubtitle">Basic Sentence Builder</div>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchMode('standard')" id="tab-standard">Basic Sentence<br>(S + V + C)</button>
        <button class="tab-btn" onclick="switchMode('continuous')" id="tab-continuous">Continuous Tense<br>(S + Be + V-ing + C)</button>
    </div>

    <div class="container">
        
        <div id="menuScreen">
            <h2>Select your Year</h2>
            <div class="menu-grid">
                <button class="level-btn y1" onclick="startGame(1)">Year 1</button>
                <button class="level-btn y2" onclick="startGame(2)">Year 2</button>
                <button class="level-btn y3" onclick="startGame(3)">Year 3</button>
                <button class="level-btn y4" onclick="startGame(4)">Year 4</button>
                <button class="level-btn y5" onclick="startGame(5)">Year 5</button>
                <button class="level-btn y6" onclick="startGame(6)">Year 6</button>
            </div>
        </div>

        <div id="gameScreen" class="game-area">
            <h3 id="levelIndicator" style="color:#555;">Level 1 - Question 1</h3>
            <p style="font-size: 18px;">Score: <span id="score" style="color:#d84315; font-weight:bold;">0</span></p>

            <div class="sentence-row" id="sentenceRow">
                </div>

            <div id="feedback" class="feedback"></div>

            <div class="word-bank" id="wordBank"></div>

            <br>
            <button class="nav-btn" id="homeBtn" onclick="showMenu()">üè† Menu</button>
            <button class="nav-btn" id="checkBtn" onclick="checkAnswer()">Check Answer</button>
            <button class="nav-btn" id="nextBtn" onclick="nextQuestion()">Next Question ‚û°</button>
        </div>
    </div>

    <script>
        // --- DATA: STANDARD (S-V-C) ---
        const dataStandard = {
            1: [ { s: "I", v: "like", c: "apples" }, { s: "The cat", v: "is", c: "fat" } ],
            2: [ { s: "My father", v: "washes", c: "the car" }, { s: "We", v: "play", c: "football" } ],
            3: [ { s: "Ali", v: "brushes", c: "his teeth" }, { s: "They", v: "go", c: "to the library" } ],
            4: [ { s: "The boy", v: "helped", c: "his mother" }, { s: "The turtle", v: "laid", c: "eggs" } ],
            5: [ { s: "The prefects", v: "arranged", c: "the chairs" }, { s: "We", v: "eat", c: "healthy food" } ],
            6: [ { s: "You", v: "must not", c: "litter here" }, { s: "Reading", v: "makes", c: "us smart" } ]
        };

        // --- DATA: CONTINUOUS (S-Be-Ving-C) ---
        const dataContinuous = {
            1: [ { s: "I", be: "am", ving: "eating", c: "an apple" }, { s: "He", be: "is", ving: "sitting", c: "on a chair" } ],
            2: [ { s: "The cat", be: "is", ving: "sleeping", c: "on the mat" }, { s: "We", be: "are", ving: "playing", c: "football" } ],
            3: [ { s: "The teacher", be: "is", ving: "writing", c: "on the board" }, { s: "Ali and Abu", be: "are", ving: "running", c: "fast" } ],
            4: [ { s: "My mother", be: "is", ving: "cooking", c: "curry" }, { s: "The boys", be: "are", ving: "swimming", c: "in the sea" } ],
            5: [ { s: "The prefects", be: "are", ving: "standing", c: "in the hall" }, { s: "The headmaster", be: "is", ving: "giving", c: "a speech" } ],
            6: [ { s: "The villagers", be: "are", ving: "cleaning", c: "the beach" }, { s: "We", be: "are", ving: "saving", c: "the turtles" } ]
        };

        // GAME STATE
        let mode = 'standard'; // 'standard' or 'continuous'
        let currentYear = 1;
        let qIndex = 0;
        let score = 0;
        let selection = {};

        // Switch Modes
        function switchMode(newMode) {
            mode = newMode;
            // Update Tabs UI
            document.getElementById('tab-standard').className = mode === 'standard' ? 'tab-btn active' : 'tab-btn';
            document.getElementById('tab-continuous').className = mode === 'continuous' ? 'tab-btn active' : 'tab-btn';
            
            // Update Subtitle
            document.getElementById('modeSubtitle').innerText = mode === 'standard' 
                ? "Basic Sentence Builder" 
                : "Continuous Tense Challenge";

            showMenu();
        }

        function showMenu() {
            document.getElementById('menuScreen').style.display = 'block';
            document.getElementById('gameScreen').style.display = 'none';
            score = 0;
            document.getElementById('score').innerText = "0";
        }

        function startGame(year) {
            currentYear = year;
            qIndex = 0;
            score = 0;
            document.getElementById('score').innerText = "0";
            document.getElementById('menuScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            
            loadQuestion();
        }

        function loadQuestion() {
            // Select data based on mode
            const dataSet = (mode === 'standard') ? dataStandard : dataContinuous;
            const yearData = dataSet[currentYear] || dataSet[1]; 

            if (qIndex >= yearData.length) {
                document.getElementById('feedback').innerText = "Level Complete! üéâ";
                document.getElementById('wordBank').innerHTML = `<button class="nav-btn" onclick="showMenu()">Back to Menu</button>`;
                document.getElementById('checkBtn').style.display = 'none';
                document.getElementById('nextBtn').style.display = 'none';
                return;
            }

            const q = yearData[qIndex];
            document.getElementById('levelIndicator').innerText = `Year ${currentYear} - Question ${qIndex + 1}`;
            document.getElementById('checkBtn').style.display = 'inline-block';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('feedback').innerText = "";

            // --- 1. BUILD SLOTS ---
            const row = document.getElementById('sentenceRow');
            row.innerHTML = "";
            selection = {};

            if (mode === 'standard') {
                createSlot(row, 's', 'Subject');
                createSlot(row, 'v', 'Verb');
                createSlot(row, 'c', 'Complement');
            } else {
                createSlot(row, 's', 'Subject');
                createSlot(row, 'be', 'Verb-to-be');
                createSlot(row, 'ving', 'Verb-ing');
                createSlot(row, 'c', 'Complement');
            }

            // --- 2. BUILD WORD BANK ---
            let words = [];
            if (mode === 'standard') {
                words = [ {t: q.s, k:'s'}, {t: q.v, k:'v'}, {t: q.c, k:'c'} ];
            } else {
                words = [ {t: q.s, k:'s'}, {t: q.be, k:'be'}, {t: q.ving, k:'ving'}, {t: q.c, k:'c'} ];
            }

            // Shuffle
            words.sort(() => Math.random() - 0.5);

            const bank = document.getElementById('wordBank');
            bank.innerHTML = "";
            words.forEach(w => {
                const btn = document.createElement('button');
                btn.className = 'word-chip';
                btn.innerText = w.t;
                btn.onclick = () => handleWordClick(w, btn);
                bank.appendChild(btn);
            });
        }

        function createSlot(container, key, label) {
            const div = document.createElement('div');
            div.className = 'slot';
            div.id = `slot-${key}`;
            div.setAttribute('data-type', label);
            div.innerText = "?";
            container.appendChild(div);
        }

        function handleWordClick(wordObj, btn) {
            // Determine order based on mode
            const order = (mode === 'standard') 
                ? ['s', 'v', 'c'] 
                : ['s', 'be', 'ving', 'c'];

            // Find first empty slot
            for (let key of order) {
                if (!selection[key]) {
                    selection[key] = wordObj.t;
                    const slot = document.getElementById(`slot-${key}`);
                    slot.innerText = wordObj.t;
                    slot.classList.add('filled');
                    
                    // Specific coloring for filled slots
                    if(key === 'be') slot.style.backgroundColor = '#fff3e0';
                    if(key === 'ving') slot.style.backgroundColor = '#e0f2f1';

                    btn.style.visibility = 'hidden';
                    return;
                }
            }
        }

        function checkAnswer() {
            const dataSet = (mode === 'standard') ? dataStandard : dataContinuous;
            const q = dataSet[currentYear][qIndex];
            const feedback = document.getElementById('feedback');
            
            let isCorrect = false;

            if (mode === 'standard') {
                if (selection.s === q.s && selection.v === q.v && selection.c === q.c) isCorrect = true;
            } else {
                if (selection.s === q.s && selection.be === q.be && selection.ving === q.ving && selection.c === q.c) isCorrect = true;
            }

            if (isCorrect) {
                feedback.innerText = "Correct! Well done, Dr Saufi's student! ‚úÖ";
                feedback.className = "feedback correct";
                score += 10;
                document.getElementById('score').innerText = score;
                document.getElementById('checkBtn').style.display = 'none';
                document.getElementById('nextBtn').style.display = 'inline-block';
            } else {
                feedback.innerText = "Try again! ‚ùå";
                feedback.className = "feedback wrong";
                setTimeout(() => {
                    // Reset slots only
                    selection = {};
                    const slots = document.querySelectorAll('.slot');
                    slots.forEach(s => {
                        s.innerText = "?";
                        s.classList.remove('filled');
                        s.style.backgroundColor = "#f5f5f5"; // Reset color
                    });
                    // Show all buttons
                    const btns = document.querySelectorAll('.word-chip');
                    btns.forEach(b => b.style.visibility = 'visible');
                    feedback.innerText = "";
                }, 1000);
            }
        }

        function nextQuestion() {
            qIndex++;
            loadQuestion();
        }

    </script>
</body>
</html>
